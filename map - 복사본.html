<!DOCTYPE html>

<html>

  <head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-169303598-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-169303598-1');
</script>
    <link href="css/map.css" rel="stylesheet">
    
    <style>

       /* Set the size of the div element that contains the map */

      #map {

        height: 100%;  /* The height is 400 pixels */
        width: 60%;  /* The width is the width of the web page */
        margin: 0px;
        padding: 10px;
        position : relative;
        float: left; 

       }

       #list {
         height:100%;
         width: 30%;
         padding: 10px;
         position : relative;
         float: left; 
       }
    </style>

  </head>

  <body>


    <h3>Sunny5ive realtime camera map</h3>

</div>
    <!--The div element for the map -->
    <div id="map"></div>
    <div id="list">
    <button class="accordion">Section 1</button>
    <div class="panel">
      <p>Lorem ipsum...</p>
    </div>
    
    <button class="accordion">Section 2</button>
    <div class="panel">
      <p>Lorem ipsum...</p>
    </div>
    
    <button class="accordion">Section 3</button>
    <div class="panel">
      <p>Lorem ipsum...</p>
    </div>
  </div>

    <script>

var markerData = [
        {
            lat: 45.434038,
            lng: 12.346914,
            icon: "http://labs.google.com/ridefinder/images/mm_20_red.png",
            url: "https://youtu.be/eE6VVJ3hvv8",
            title: "Tribute to Music Venice",
            nation:"Italy"
        },
        {
            lat: 45.430309688458,
            lng: 12.329755300619,
            icon: "http://labs.google.com/ridefinder/images/mm_20_blue.png",
            url: "https://youtu.be/JqUREqYduHw",
            title: "Hotel American Dinesen",
            nation:"Italy"
        },
        {
            lat: 45.203078,
            lng: 12.299722,
            icon: "http://labs.google.com/ridefinder/images/mm_20_red.png",
            url: "https://youtu.be/1pf1qjYpHlY",
            title: "Hotel Park Chioggia",
            nation:"Italy"
        },        {
            lat: 45.440705,
            lng: 12.332468,
            icon: "http://labs.google.com/ridefinder/images/mm_20_red.png",
            url: "https://youtu.be/cjCmsRjxVL0",
            title: "Hotel San Cassiano",
            nation:"Italy"
        },        {
            lat: 45.437783,
            lng: 12.340628,
            icon: "http://labs.google.com/ridefinder/images/mm_20_red.png",
            url: "https://youtu.be/WjOGhNDX51M",
            title: "Ruzzini Palace Hotel",
            nation:"Italy"
        },        {
            lat: 45.437039,
            lng: 12.335081,
            icon: "http://labs.google.com/ridefinder/images/mm_20_red.png",
            url: "https://youtu.be/BPXtn15_9qo",
            title: "Rialto Bridge",
            nation:"Italy"
        }, {
            lat: 42.792238,
            lng: 13.092661,
            icon: "http://labs.google.com/ridefinder/images/mm_20_red.png",
            url: "https://youtu.be/C78daVqDpB8",
            title: "Piazza S. Benedetto",
            nation:"Italy"
        }, {
            lat: 67.289901,
            lng: 14.398237,
            icon: "http://labs.google.com/ridefinder/images/mm_20_red.png",
            url: "https://youtu.be/5BHJBR3_dv8",
            title: "Bodo harbor KF",
            nation:"Norway"
        }, {
            lat: 46.521178,
            lng: 6.636441,
            icon: "http://labs.google.com/ridefinder/images/mm_20_red.png",
            url: "https://youtu.be/TyElel0QjCI",
            title: "Lausanne, pont Bessi√®res",
            nation:"Swiss"
        }, {
            lat: 43.479394434038,
            lng: -110.762717,
            icon: "http://labs.google.com/ridefinder/images/mm_20_red.png",
            url: "https://youtu.be/1EiC9bvVGnk",
            title: "Jackson Hole Wyoming USA Town Square",
            nation:"USA"
        },        {
            lat: 37.551279,
            lng: 126.988227,
            icon: "http://labs.google.com/ridefinder/images/mm_20_red.png",
            url: "https://youtu.be/am2Ivi346tQ",
            title: "N Seoul Tower",
            nation:"Korea"
        },
        {
            lat: 35.147920,
            lng: 129.130059,
            icon: "http://labs.google.com/ridefinder/images/mm_20_red.png",
            url: "https://youtu.be/_YDqoaTAtww",
            title: "Gwangan Bridge",
            nation:"Korea"
        },
        {
            lat: 37.563188,
            lng: 126.987358,
            icon: "http://labs.google.com/ridefinder/images/mm_20_red.png",
            url: "https://youtu.be/qFSdE5RTb_g",
            title: "Myeongdong Catholic Cathedral",
            nation:"Korea"
        },
        {
            lat: 35.168334,
            lng: 129.057178,
            icon: "http://labs.google.com/ridefinder/images/mm_20_red.png",
            url: "https://youtu.be/Zlxa4-BTPAQ",
            title: "Busan Citizen Park",
            nation:"Korea"
        }


    ];
    var checkNation;
var nationList = [];
    createList(markerData); 



var acc = document.getElementsByClassName("accordion");
var i;

for (i = 0; i < acc.length; i++) {
    acc[i].addEventListener("click", function() {
      this.classList.toggle("active");
      var children = this.childNodes;
      for(Cid in children){
      //var panel = this.nextElementSibling;
      if(Cid >0){
      var panel = children[Cid];
      if (panel.style.display === "block") {
        panel.style.display = "none";
      } else {
        panel.style.display = "block";
      }
    }
  }
    });
  }
// Initialize and add the map


var map;

function initMap() {

  // The location of Uluru

  var NStower = {lat: 36.631154, lng: 127.502926};

  // The map, centered at Uluru

 map = new google.maps.Map(

      document.getElementById('map'), {zoom: 8, center: NStower});

  // The marker, positioned at Uluru

  //var marker = new google.maps.Marker({position: uluru, map: map});
  for (markerId in markerData) {
        markers[markerId] = createMarker(markerData[markerId]);
    }
    //markers['bing'].setTitle("new title");
}
 var markers = {};
 var boxList =[];
 var url;
 var count=0;
    // inside function createMap(...)
  
    

function createList(markerData){
  for(id in markerData){

for(Nid in nationList){
if(markerData[id].nation==nationList[Nid])
{
  checkNation=1;
  break;
}

}

if(checkNation==0){
  nationList.push(markerData[id].nation);
  
var bt = document.createElement("button");
bt.className="accordion";
bt.title = markerData[id].nation;
bt.id = markerData[id].nation;
bt.innerText=markerData[id].nation;

var div = document.createElement("div");
div.className="panel";
var p = document.createElement("p")
p.title = markerData[id].title;
p.innerText = markerData[id].title;
//p.addEventListener("click",window.open(markerData[id].url));

div.appendChild(p);
bt.appendChild(div);
list.appendChild(bt);
}

else if(checkNation==1){
var bt = document.getElementById(markerData[id].nation);
var div = document.createElement("div");
div.className="panel";
div.onclick
var p = document.createElement("p")
p.title = markerData[id].title;
p.innerText = markerData[id].title;
//p.addEventListener("click",window.open(markerData[id].url));

bt.appendChild(div);
div.appendChild(p);
}


checkNation=0;
}
}


function createMarker(data) {
    var myLatLng = new google.maps.LatLng(data.lat, data.lng);
    
    var marker = new google.maps.Marker({
        id : count,
        position: myLatLng,
        //icon: data.icon,
        map: map,
        title: data.title
        //animation:google.maps.Animation.BOUNCE


    });
    //var content = "Loan Number: " + data.title + '</h3>' + "Address: " + data.url

   /* var boxText = document.createElement("div");
            boxText.id = markerId;
            boxText.style.cssText = "border: 1px solid black; margin-top: 8px; background: yellow; padding: 5px;";
            boxText.innerHTML = "InfoBox for " + "hello";

    var ib = new InfoBox(myOptions);
            boxList.push(ib); */


            var boxText = document.createElement("div");
            var boxUrl = document.createElement("a");
            boxUrl.setAttribute('href',markerData[count].url);
            boxUrl.innerText = markerData[count].title;
            boxText.id = count;
            boxUrl.innerHTML = markerData[count].title;
            boxList.push(boxUrl);

            /*var myOptions = {
                content: boxText
                ,disableAutoPan: false
                ,maxWidth: 0
                ,pixelOffset: new google.maps.Size(-140, 0)
                ,zIndex: null
                ,boxStyle: {
                    background: "url('tipbox.gif') no-repeat"
                    ,opacity: 0.75
                    ,width: "280px"
                }
                ,closeBoxMargin: "10px 2px 2px 2px"
                ,closeBoxURL: "http://www.google.com/intl/en_us/mapfiles/close.gif"
                ,infoBoxClearance: new google.maps.Size(1, 1)
                ,isHidden: false
                ,pane: "floatPane"
                ,enableEventPropagation: false
            };*/
            //var ib = new InfoBox(myOptions);


//var infowindow = new google.maps.InfoWindow()

var infowindow = new google.maps.InfoWindow({
            disableAutoPan: true
          ,isHidden:false
          ,pixelOffset: new google.maps.Size(-10, -10)
          ,closeBoxURL: ""
          ,pane: "mapPane"
          ,enableEventPropagation: true
        });

google.maps.event.addListener(marker, "click", (function(marker) {
      return function(evt) {
        url=data.url;
        /*var content = '<div id="infoWindow">'
                    +'<div id="bodyContent">'
                    +'<p>'
                   // + "This location is:<br>"
                    + marker.getTitle()
                    +'</p>'
                    +'</div>'
                    + '</div>';*/

        

        var content = boxList[this.id];
        
                    infowindow.setContent(content);
                    infowindow.open(map, marker);
                
      }
    })(marker));

    count++;
  }

  
  function openYT(url){
    alert(url);
    var YT = window.open(url);
  }
  

  
    </script>

    <!--Load the API from the specified URL

    * The async attribute allows the browser to render the page while the API loads

    * The key parameter will contain your own API key (which is not needed for this tutorial)

    * The callback parameter executes the initMap() function

    -->
    
    <script async defer

    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDu6Sfm83Qr5-o_k3olARNCQTbq1BjX7WQ&callback=initMap">

    </script>

        
  <!--<script src="js/map.js"></script>-->
  </body>

</html>